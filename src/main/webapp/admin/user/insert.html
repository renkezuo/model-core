<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>用户新增</title>
</head>
<body>
	<script>
	//	function addUser(){
	//		var formData = new FormData($('#userForm')[0]);
	//		formData = new FormData();
	//		formData.append("file2",document.getElementById("file2").files[0]);
	//		var json = {
	//			phone:'1111',
	//			login_key:'2222'
	//		}
	//		$.ajax({
	//		    url: '/user/insert.do',
	//		    type: 'post',
	//		    cache: false,
	//		    data: formData,
	//		    processData: false,
	//		    contentType: false,
	//		    success:function(res){
	//		    	alert("success:"+res.msg);
	//		    },
	//		    error:function(e){
	//		    	alert("error:"+e.msg);
	//		    }
	//		});
	//	}
		var options = {
			//target: '#output',          //把服务器返回的内容放入id为output的元素中    
			beforeSubmit: showRequest,  //提交前的回调函数
			success: showResponse      	//提交后的回调函数
			//url: url,                 //默认是form的action， 如果申明，则会覆盖
			//type: type,               //默认是form的method（get or post），如果申明，则会覆盖
			//dataType: null,           //html(默认), xml, script, json...接受服务端返回的类型
			//clearForm: true,          //成功提交后，清除所有表单元素的值
			//resetForm: true,          //成功提交后，重置所有表单元素的值
			//timeout: 10000              //限制请求的时间，当请求大于10秒后，中止请求，后台可能出现EOF问题
		}
		
		function showRequest(formData, jqForm, options){
			//formData: 数组对象，提交表单时，Form插件会以Ajax方式自动提交这些数据，格式如：[{name:user,value:val },{name:pwd,value:pwd}]
			//jqForm:   jQuery对象，封装了表单的元素   
			//options:  options对象
// 			var queryString = $.param(formData);   //name=1&address=2
// 			var formElement = jqForm[0];              //将jqForm转换为DOM对象
// 			var address = formElement.address.value;  //访问jqForm的DOM元素
			alert("beforeRequest:"+formData);
			return true;//只要不返回false，表单都会提交,在这里可以对表单元素进行验证
		};
		
		function showResponse(responseText, statusText){
			alert("response:"+responseText);
		};
		

		function addUser(){
			$('#userForm').ajaxSubmit(options);
		}
	</script>
	<div class="row" style="padding:20px 0px 0px 0px;">
		<div class="col-lg-12">
			<div class="panel panel-default">
				<div class="panel-heading">添加用户</div>
				<div class="panel-body">
					<form id="userForm" action="/user/insert.do" method="post" role="form" enctype="multipart/form-data">
					<div class="col-md-6">
						<div class="form-group">
							<input class="form-control" name="phone" placeholder="手机号">
						</div>
						<div class="form-group">
							<input type="password" name="login_pwd" class="form-control" placeholder="密码">
						</div>
						<div class="form-group">
							<textarea name="hello"rows="5" style="width:98%"></textarea>
						</div>
						<div class="form-group">
							<!-- 90%，解决手机浏览器横向滚动条的问题 -->
							<input type="file" name="file" style="width:90%" />
						</div>
						<div class="form-group">
							<!-- 90%，解决手机浏览器横向滚动条的问题 -->
							<input type="file" name="file2" style="width:90%" />
						</div>
						<div class="form-group">
							<!-- 90%，解决手机浏览器横向滚动条的问题 -->
							<input type="file" name="file" style="width:90%" />
						</div>
						<div class="form-group">
							<input type="password" name="nickname" class="form-control" placeholder="昵称">
						</div>
						<input type="button" class="btn btn-primary" onclick="addUser();" value="提交">
<!-- 						<input type="submit" class="btn btn-primary" value="提交"> -->
					</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<script>
		addUser();
	</script>
</body>
</html>
